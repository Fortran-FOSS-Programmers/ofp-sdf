definition

%%%%%%%%%%%
%%
module Main
imports
  Disambiguate
  AddPrecision
  Layout

%%%%%%%%%%%
%%
module N
exports

  sorts N

  lexical syntax
     [A-Za-z][A-Za-z0-9\_]*   -> Ident
     [0-9]+                   -> N

  context-free syntax
     N "+" N     -> N
     "-" N       -> N

  context-free start-symbols
     N

%%%%%%%%%%%
%%
module Disambiguate
imports N
exports

  context-free priorities
     "-" N -> N   >   N "+" N -> N  {left}

%%%%%%%%%%%
%%
module AddPrecision
imports N
exports

  context-free syntax
    [0][0-9]+  -> N  {reject}
    "-" [0]    -> N  {reject}

%%%%%%%%%%%
%%
module Layout
exports
  lexical syntax
    [\ \t\n]    -> LAYOUT
  context-free restrictions
    LAYOUT? -/- [\ \t\n]
    N       -/- [0-9]




